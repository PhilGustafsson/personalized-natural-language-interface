{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/jobs/{job_id}":{"get":{"summary":"Get Job Status","operationId":"get_job_status_jobs__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/finetuned_models":{"get":{"summary":"Get Finetuned Models","description":"Lists all available fine-tuned models in the current directory.\nLooks for directories containing 'adapter_config.json'.","operationId":"get_finetuned_models_finetuned_models_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/select_model":{"post":{"summary":"Select Model","operationId":"select_model_select_model_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelSelect"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/load_dataset":{"post":{"summary":"Load Dataset","operationId":"load_dataset_load_dataset_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoadDatasetRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/fine_tune":{"post":{"summary":"Fine Tune","operationId":"fine_tune_fine_tune_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FineTuneRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/optuna_search":{"post":{"summary":"Optuna Search","operationId":"optuna_search_optuna_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OptunaRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/evaluate_model":{"post":{"summary":"Evaluate Model","operationId":"evaluate_model_evaluate_model_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluateModelRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transcribe":{"post":{"summary":"Transcribe","operationId":"transcribe_transcribe_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscribeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscribeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transcribe_whisperx":{"post":{"summary":"Transcribe Whisperx","operationId":"transcribe_whisperx_transcribe_whisperx_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhisperXTranscribeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscribeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/load_whisperx_model":{"post":{"summary":"Load Whisperx Model","description":"Load WhisperX model. \n\nIf model_name is a local path to a fine-tuned LoRA model (has adapter_config.json but no model.bin),\nit will automatically convert it to CTranslate2 format first.","operationId":"load_whisperx_model_load_whisperx_model_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhisperXLoadRequest"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"EvaluateModelRequest":{"properties":{"eval_split":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Eval Split","default":"test"},"per_device_eval_batch_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Per Device Eval Batch Size","default":64}},"type":"object","title":"EvaluateModelRequest"},"FineTuneRequest":{"properties":{"user":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User","default":"default_user"},"saved_model_dir":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Saved Model Dir","default":"finetuned_models"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed","default":1337},"warmup_ratio":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Warmup Ratio","default":0.1},"learning_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Learning Rate","default":0.000165},"num_train_epochs":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Num Train Epochs","default":5},"weight_decay":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Weight Decay","default":0.1},"per_device_train_batch_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Per Device Train Batch Size","default":32},"per_device_eval_batch_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Per Device Eval Batch Size","default":32},"max_grad_norm":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Grad Norm","default":1.0},"label_smoothing_factor":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Label Smoothing Factor","default":0},"lr_scheduler_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lr Scheduler Type","default":"cosine"},"gradient_accumulation_steps":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Gradient Accumulation Steps","default":3},"optimizer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Optimizer","default":"adamw_8bit"}},"type":"object","title":"FineTuneRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"JobInfo":{"properties":{"job_id":{"type":"string","title":"Job Id"},"status":{"$ref":"#/components/schemas/JobStatus"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"message":{"type":"string","title":"Message","default":""},"result":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Result"}},"type":"object","required":["job_id","status","created_at","updated_at"],"title":"JobInfo"},"JobStatus":{"type":"string","enum":["pending","running","completed","failed"],"title":"JobStatus"},"LoadDatasetRequest":{"properties":{"manifest_path":{"type":"string","title":"Manifest Path","default":"data_generation/ai_manus.jsonl"},"recordings_root":{"type":"string","title":"Recordings Root","default":"data_generation/recordings/David/ai_manus"},"user":{"type":"string","title":"User","default":"David"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed","default":1337},"split_ratios":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Split Ratios","default":{"train":0.8,"val":0.1,"test":0.1}},"use_data_augmentation":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Use Data Augmentation","default":false}},"type":"object","title":"LoadDatasetRequest"},"ModelSelect":{"properties":{"model_dir":{"type":"string","title":"Model Dir","default":"models/kb-whisper-large"},"whisper_language":{"type":"string","title":"Whisper Language","default":"Swedish"}},"type":"object","title":"ModelSelect"},"OptunaRequest":{"properties":{"user":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User","default":"default_user"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed","default":1337},"n_trials":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"N Trials","default":5},"learning_rate_range":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Learning Rate Range","default":[1e-06,0.0005]},"num_train_epochs_range":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Num Train Epochs Range","default":[9,12]},"weight_decay_range":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Weight Decay Range","default":[0.0,0.15]},"warmup_ratio_range":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Warmup Ratio Range","default":[0.05,0.3]},"max_grad_norm_range":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Max Grad Norm Range","default":[0.5,2.0]},"per_device_train_batch_size_range":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Per Device Train Batch Size Range","default":[16,32]},"per_device_eval_batch_size_range":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Per Device Eval Batch Size Range","default":[16,32]},"gradient_accumulation_steps_range":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Gradient Accumulation Steps Range","default":[1,4]},"label_smoothing_factor_range":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Label Smoothing Factor Range","default":[0.0,0.1]},"lr_scheduler_type_choices":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Lr Scheduler Type Choices","default":["cosine","linear"]},"optimizer":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Optimizer","default":["adamw_8bit"]},"pruning_warmup_trials":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Pruning Warmup Trials","default":1},"pruning_warmup_epochs":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Pruning Warmup Epochs","default":1},"max_wer_threshold":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Wer Threshold","default":30.0},"pruning_wer_patience":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Pruning Wer Patience","default":2}},"type":"object","title":"OptunaRequest"},"TranscribeRequest":{"properties":{"audio_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audio Path","default":"data_long_scripts_test/manus1_david.wav"},"transcribe_language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transcribe Language","default":"sv"}},"type":"object","title":"TranscribeRequest"},"TranscribeResponse":{"properties":{"text":{"type":"string","title":"Text"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","default":"sv"},"timestamps":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Timestamps","default":[]}},"type":"object","required":["text"],"title":"TranscribeResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WhisperXLoadRequest":{"properties":{"model_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model Name","default":"KBLab/kb-whisper-large"},"align_model_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Align Model Name","default":"KBLab/wav2vec2-large-voxrex-swedish"},"cache_dir":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cache Dir","default":"models/cache"},"base_model_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Base Model Path","default":"models/kb-whisper-large"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","default":"sv"},"compute_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Compute Type","default":"float16"},"batch_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Batch Size","default":64},"chunk_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Chunk Size","default":30}},"type":"object","title":"WhisperXLoadRequest"},"WhisperXTranscribeRequest":{"properties":{"audio_path":{"type":"string","title":"Audio Path","default":"data_long_scripts_test/manus1_david.wav"},"do_align":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Do Align","default":true}},"type":"object","title":"WhisperXTranscribeRequest"}}}}